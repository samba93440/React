{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\stagiaire\\\\Desktop\\\\blog\\\\src\\\\components\\\\posts.jsx\";\nimport React, { Component } from \"react\";\nimport { getPosts } from \"../services/fakePostsService\";\nimport Pagination from \"./pagination\";\nimport { pagination } from \"../utils/pagination\";\n\nclass Posts extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      posts: getPosts(),\n      // initialiser la valeur de posts\n      // attention étant donné que le fichier de service est stocké sur le même disque dur\n      // que le composant ici OK\n      // si les données sont stockées sur un autre disque dur => appel d'API\n      // c'est la pas la bonne méthode\n      // ici est PRIVE = uniquement visible par le composant\n      nbArticleParPage: 4,\n      pageEncours: 1\n    };\n\n    this.handleDelete = post => {\n      const posts = this.state.posts.filter(m => {\n        return m._id !== post._id;\n      });\n      this.setState({\n        posts: posts\n      });\n    };\n\n    this.gestionClick = (e, numPage) => {\n      // méthode va impacter le state.pageEncours\n      e.preventDefault();\n      this.setState({\n        pageEncours: numPage\n      });\n      console.log(\"je suis cliqué\", numPage);\n    };\n  }\n\n  //cdm\n  componentDidMount() {// hook de cycle de vie du composant\n    // toutes les instructions de cette fonction sont exécutées lorsque\n    // le composant est monté = affiché dans le DOM\n    // si les données sont stockées sur un autre disque dur\n    // c'est dans cette fonction qu'il faut initialiser le state\n    // appel à une api et\n    //const resultat = axios.get(\"url\")\n    //this.setState({posts : resultat })\n  }\n\n  render() {\n    // déterminer le nombre d'article dans la base de données\n    // destructuration d'un objet et renommage\n    const count = this.state.posts.length;\n    const _this$state = this.state,\n          nbArticleParPage = _this$state.nbArticleParPage,\n          pageEncours = _this$state.pageEncours,\n          posts = _this$state.posts;\n    if (count === 0) return React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51\n      },\n      __self: this\n    }, \"Aucun article dans la base de donn\\xE9es\"); //sinon\n\n    const pages = pagination(posts, pageEncours, nbArticleParPage);\n    return React.createElement(React.Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57\n      },\n      __self: this\n    }, count, \" Articles dans la base de donn\\xE9es\"), React.createElement(\"table\", {\n      className: \"table\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }, React.createElement(\"thead\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61\n      },\n      __self: this\n    }, \"Titre\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    }, \"Cat\\xE9gorie\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }))), React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, pages.map(post => React.createElement(\"tr\", {\n      key: post._id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, post.titre), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, post.categorie.nom), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      onClick: () => this.handleDelete(post),\n      className: \"btn btn-danger btn-sm\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, \"Delete\")))))), React.createElement(Pagination, {\n      totalArticles: count,\n      nbArticleParPage: nbArticleParPage,\n      pageEncours: pageEncours,\n      gestionClick: this.gestionClick // Le composant qui possède le state doit être celui qui le modifie\n      ,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default Posts;","map":{"version":3,"sources":["C:\\Users\\stagiaire\\Desktop\\blog\\src\\components\\posts.jsx"],"names":["React","Component","getPosts","Pagination","pagination","Posts","state","posts","nbArticleParPage","pageEncours","handleDelete","post","filter","m","_id","setState","gestionClick","e","numPage","preventDefault","console","log","componentDidMount","render","count","length","pages","map","titre","categorie","nom"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { getPosts } from \"../services/fakePostsService\";\nimport Pagination from \"./pagination\";\nimport { pagination } from \"../utils/pagination\";\n\nclass Posts extends Component {\n  state = {\n    posts: getPosts(), // initialiser la valeur de posts\n    // attention étant donné que le fichier de service est stocké sur le même disque dur\n    // que le composant ici OK\n    // si les données sont stockées sur un autre disque dur => appel d'API\n    // c'est la pas la bonne méthode\n    // ici est PRIVE = uniquement visible par le composant\n    nbArticleParPage: 4,\n    pageEncours: 1\n  };\n\n  //cdm\n  componentDidMount() {\n    // hook de cycle de vie du composant\n    // toutes les instructions de cette fonction sont exécutées lorsque\n    // le composant est monté = affiché dans le DOM\n    // si les données sont stockées sur un autre disque dur\n    // c'est dans cette fonction qu'il faut initialiser le state\n    // appel à une api et\n    //const resultat = axios.get(\"url\")\n    //this.setState({posts : resultat })\n  }\n\n  handleDelete = post => {\n    const posts = this.state.posts.filter(m => {\n      return m._id !== post._id;\n    });\n    this.setState({ posts: posts });\n  };\n\n  gestionClick = (e, numPage) => {\n    // méthode va impacter le state.pageEncours\n    e.preventDefault();\n    this.setState({ pageEncours: numPage });\n    console.log(\"je suis cliqué\", numPage);\n  };\n\n  render() {\n    // déterminer le nombre d'article dans la base de données\n    // destructuration d'un objet et renommage\n    const { length: count } = this.state.posts;\n\n    const { nbArticleParPage, pageEncours, posts } = this.state;\n\n    if (count === 0) return <p>Aucun article dans la base de données</p>;\n    //sinon\n\n    const pages = pagination(posts, pageEncours, nbArticleParPage);\n    return (\n      <React.Fragment>\n        <p>{count} Articles dans la base de données</p>\n        <table className=\"table\">\n          <thead>\n            <tr>\n              <th>Titre</th>\n              <th>Catégorie</th>\n              <th />\n              <th />\n            </tr>\n          </thead>\n          <tbody>\n            {pages.map(post => (\n              <tr key={post._id}>\n                {/* key est obligatoire pour react quand on fait des boucles car il doit pouvoir distinguer les différents éléments de la boucle car si la boucle est modifiée bien pouvoir voir ce qui est détruite et créé \n              key n'est pas une props \n              */}\n                <td>{post.titre}</td>\n                <td>{post.categorie.nom}</td>\n                <td>\n                  <button\n                    onClick={() => this.handleDelete(post)}\n                    className=\"btn btn-danger btn-sm\"\n                  >\n                    Delete\n                  </button>\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n        <Pagination\n          totalArticles={count}\n          nbArticleParPage={nbArticleParPage}\n          pageEncours={pageEncours}\n          gestionClick={this.gestionClick} // Le composant qui possède le state doit être celui qui le modifie\n        />\n      </React.Fragment>\n    );\n  }\n}\n\nexport default Posts;\n"]},"metadata":{},"sourceType":"module"}